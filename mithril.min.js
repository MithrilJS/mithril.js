/*
Mithril v0.2.3
http://mithril.js.org
(c) 2014-2016 Leo Horie
License: MIT
*/
!function(a,b){"use strict";var c=b(a);"object"==typeof module&&null!=module&&module.exports?module.exports=c:"function"==typeof define&&define.amd?define(function(){return c}):a.m=c}("undefined"!=typeof window?window:{},function(a,b){"use strict";function c(a){return"function"==typeof a}function d(a){return"[object Object]"===Ea.call(a)}function e(a){return"[object String]"===Ea.call(a)}function f(){}function g(a){za=a.document,Aa=a.location,Ca=a.cancelAnimationFrame||a.clearTimeout,Ba=a.requestAnimationFrame||a.setTimeout}function h(a,b){for(var c,d=[],e=/(?:(^|#|\.)([^#\.\[\]]+))|(\[.+?\])/g;c=e.exec(b);)if(""===c[1]&&c[2])a.tag=c[2];else if("#"===c[1])a.attrs.id=c[2];else if("."===c[1])d.push(c[2]);else if("["===c[3][0]){var f=/\[(.+?)(?:=("|'|)(.*?)\2)?\]/.exec(c[3]);a.attrs[f[1]]=f[3]||""}return d}function i(a,b){var c=b?a.slice(1):a;return 1===c.length&&Fa(c[0])?c[0]:c}function j(a,b,c){var d="class"in b?"class":"className";for(var e in b)Da.call(b,e)&&(e===d&&null!=b[e]&&""!==b[e]?(c.push(b[e]),a[e]=""):a[e]=b[e]);c.length&&(a[d]=c.join(" "))}function k(a,b){for(var c=[],f=1,g=arguments.length;g>f;f++)c[f-1]=arguments[f];if(d(a))return fa(a,c);if(!e(a))throw new Error("selector in m(selector, attrs, children) should be a string");var k=null!=b&&d(b)&&!("tag"in b||"view"in b||"subtree"in b),l=k?b:{},m={tag:"div",attrs:{},children:i(c,k)};return j(m.attrs,l,h(m,a)),m}function l(a,b){for(var c=0;c<a.length&&!b(a[c],c++););}function m(a,c){switch(c.length){case 0:return new a;case 1:return new a(c[0]);case 2:return new a(c[0],c[1]);case 3:return new a(c[0],c[1],c[2]);case 4:return new a(c[0],c[1],c[2],c[3]);default:return new(a.bind.apply(a,[b].concat(c)))}}function n(a){return c(a.tag.controller)?m(a.tag.controller,a.args):{}}function o(a,b){var c=a.args;switch(c.length){case 0:return a.tag.view(b);case 1:return a.tag.view(b,c[0]);case 2:return a.tag.view(b,c[0],c[1]);case 3:return a.tag.view(b,c[0],c[1],c[2]);case 4:return a.tag.view(b,c[0],c[1],c[2],c[3]);default:return a.tag.view.apply(a.tag,[b].concat(c))}}function p(a,b){l(a,function(a,c){return(a=a&&a.attrs)&&null!=a.key&&b(a,c)})}function q(a){try{if(null!=a&&null!=a.toString())return a}catch(b){}return""}function r(a,b,c,d){try{t(a,b,c),b.nodeValue=d}catch(e){}}function s(a){for(var b=0;b<a.length;b++)Fa(a[b])&&(a=a.concat.apply([],a),b--);return a}function t(a,b,c){a.insertBefore(b,a.childNodes[c]||null)}function u(a,b,c,d){p(a,function(a,d){b[a=a.key]=b[a]?{action:Ja,index:d,from:b[a].index,element:c.nodes[b[a].index]||za.createElement("div")}:{action:Ia,index:d}});var e=[];for(var f in b)Da.call(b,f)&&e.push(b[f]);var g=e.sort(V),h=new Array(c.length);return h.nodes=c.nodes.slice(),l(g,function(b){var e=b.index;if(b.action===Ha&&($(c[e].nodes,c[e]),h.splice(e,1)),b.action===Ia){var f=za.createElement("div");f.key=a[e].attrs.key,t(d,f,e),h.splice(e,0,{attrs:{key:a[e].attrs.key},nodes:[f]}),h.nodes[e]=f}if(b.action===Ja){var g=b.element,i=d.childNodes[e];i!==g&&null!==g&&d.insertBefore(g,i||null),h[e]=c[b.from],h.nodes[e]=g}}),h}function v(a,b,c,d){var e=a.length!==b.length;return e||p(a,function(a,c){var d=b[c];return e=d&&d.attrs&&d.attrs.key!==a.key}),e?u(a,c,b,d):b}function w(a,b,c){l(a,function(a,d){null!=b[d]&&c.push.apply(c,b[d].nodes)}),l(b.nodes,function(a,d){null!=a.parentNode&&c.indexOf(a)<0&&$([a],[b[d]])}),a.length<b.length&&(b.length=a.length),b.nodes=c}function x(a){var b=0;p(a,function(){return l(a,function(a){(a=a&&a.attrs)&&null==a.key&&(a.key="__mithril__"+b++)}),1})}function y(a,b,c){return a.tag!==b.tag?!0:c.sort().join()!==Object.keys(b.attrs).sort().join()?!0:a.attrs.id!==b.attrs.id?!0:a.attrs.key!==b.attrs.key?!0:"all"===k.redraw.strategy()?!b.configContext||b.configContext.retain!==!0:"diff"===k.redraw.strategy()?b.configContext&&b.configContext.retain===!1:!1}function z(a,b,d){y(a,b,d)&&(b.nodes.length&&$(b.nodes),b.configContext&&c(b.configContext.onunload)&&b.configContext.onunload(),b.controllers&&l(b.controllers,function(a){a.onunload&&a.onunload({preventDefault:f})}))}function A(a,b){return a.attrs.xmlns?a.attrs.xmlns:"svg"===a.tag?"http://www.w3.org/2000/svg":"math"===a.tag?"http://www.w3.org/1998/Math/MathML":b}function B(a,b,c){c.length&&(a.views=b,a.controllers=c,l(c,function(a,b){a.onunload&&Ma[b]&&(a.onunload=Ma[b],delete Ma[b]),Ka&&a.onunload&&(Ma[b]=a.onunload,a.onunload=f)}))}function C(a,b,d,e,f){if(c(b.attrs.config)){var g=f.configContext=f.configContext||{};a.push(function(){return b.attrs.config.call(b.tag,d,!e,g,f)})}}function D(a,c,d,e,f,g,h,i){var j=a.nodes[0];return e&&Z(j,c.tag,c.attrs,a.attrs,f),a.children=U(j,c.tag,b,b,c.children,a.children,!1,0,c.attrs.contenteditable?j:d,f,h),a.nodes.intact=!0,i.length&&(a.views=g,a.controllers=i),j}function E(a,b,c){var d;a.$trusted?d=ba(b,c,a):(d=[za.createTextNode(a)],b.nodeName in Ga||t(b,d[0],c));var e;return e="string"==typeof a||"number"==typeof a||"boolean"==typeof a?new a.constructor(a):a,e.nodes=d,e}function F(a,b,c,d,e,f){var g=b.nodes;return d&&d===za.activeElement||(a.$trusted?($(g,b),g=ba(c,e,a)):"textarea"===f?c.value=a:d?d.innerHTML=a:((1===g[0].nodeType||g.length>1||g[0].nodeValue.trim&&!g[0].nodeValue.trim())&&($(b.nodes,b),g=[za.createTextNode(a)]),r(c,g[0],e,a))),b=new a.constructor(a),b.nodes=g,b}function G(a,b,c,d,e,f,g){return a.nodes.length?a.valueOf()!==b.valueOf()||e?F(b,a,d,f,c,g):(a.nodes.intact=!0,a):E(b,d,c)}function H(a){if(a.$trusted){var b=a.match(/<[^\/]|\>\s*[^<]/g);if(null!=b)return b.length}else if(Fa(a))return a.length;return 1}function I(a,c,d,e,f,g,h,i,j){a=s(a);var k=[],l=c.length===a.length,m=0,n={},o=!1;p(c,function(a,b){o=!0,n[c[b].attrs.key]={action:Ha,index:b}}),x(a),o&&(c=v(a,c,n,d));for(var q=0,r=0,t=a.length;t>r;r++){var u=U(d,f,c,e,a[r],c[q],g,e+m||m,h,i,j);u!==b&&(l=l&&u.nodes.intact,m+=H(u),c[q++]=u)}return l||w(a,c,k),c}function J(a,b,c,d,f){if(null!=b){if(Ea.call(b)===Ea.call(a))return b;if(f&&f.nodes){var g=c-d,h=g+(Fa(a)?a:b.nodes).length;$(f.nodes.slice(g,h),f.slice(g,h))}else b.nodes&&$(b.nodes,b)}return b=new a.constructor,e(b.tag)&&(b={}),b.nodes=[],b}function K(a,b){return a.attrs.is?null==b?za.createElement(a.tag,a.attrs.is):za.createElementNS(b,a.tag,a.attrs.is):null==b?za.createElement(a.tag):za.createElementNS(b,a.tag)}function L(a,b,c,d){return d?Z(b,a.tag,a.attrs,{},c):a.attrs}function M(a,c,d,e,f,g){return null!=a.children&&a.children.length>0?U(c,a.tag,b,b,a.children,d.children,!0,0,a.attrs.contenteditable?c:e,f,g):a.children}function N(a,b,c,d,e,f,g){var h={tag:a.tag,attrs:b,children:c,nodes:[d]};return B(h,f,g),h.children&&!h.children.nodes&&(h.children.nodes=[]),"select"===a.tag&&"value"in a.attrs&&Z(d,a.tag,{value:a.attrs.value},{},e),h}function O(a,b,c){var d;return d="diff"===k.redraw.strategy()&&a.views?a.views.indexOf(c.tag.view):-1,d>-1?b[d]:n(c)}function P(a){for(var b=0;b<Na.length;b++)if(Na[b].handler===a)return!0;return!1}function Q(a,b,c,d){null==d.onunload||P(d.onunload)||Na.push({controller:d,handler:d.onunload}),a.push(c.tag.view),b.push(d)}function R(a,b,c,d,e){var f=a,g=O(b,c,f),h=a&&a.attrs&&a.attrs.key;return a=0===Ka||Oa||c&&c.indexOf(g)>-1?o(a,g):{tag:"placeholder",attrs:{}},"retain"===a.subtree?a:(a.attrs.key=h,Q(e,d,f,g),a)}function S(a,b,c,e){for(var f=b&&b.controllers;d(a.tag);)a=R(a,b,f,e,c);return a}function T(a,b,c,d,f,g,h,i){var j=[],k=[];if(a=S(a,b,j,k),"retain"===a.subtree)return b;if(!a.tag&&k.length)throw new Error("Component template must return a virtual element, not an array, string, etc.");a.attrs=a.attrs||{},b.attrs=b.attrs||{};var l=Object.keys(a.attrs),m=l.length>(null!=a.attrs.key?1:0);if(z(a,b,l),e(a.tag)){var n=0===b.nodes.length;h=A(a,h);var o;if(n){o=K(a,h);var p=L(a,o,h,m),q=M(a,o,b,c,h,i);b=N(a,p,q,o,h,j,k)}else o=D(b,a,c,m,h,j,i,k);return(n||g===!0&&null!=o)&&t(d,o,f),C(i,a,o,n,b),b}}function U(a,b,e,f,g,h,i,j,k,l,m){return g=q(g),"retain"===g.subtree?h:(h=J(g,h,j,f,e),Fa(g)?I(g,h,a,j,b,i,k,l,m):null!=g&&d(g)?T(g,h,k,a,j,i,l,m):c(g)?h:G(h,g,j,a,i,k,b))}function V(a,b){return a.action-b.action||a.index-b.index}function W(a,b,c){for(var d in b)Da.call(b,d)&&(null==c||c[d]!==b[d])&&(a.style[d]=b[d]);for(d in c)Da.call(c,d)&&(Da.call(b,d)||(a.style[d]=""))}function X(a,b,e,f,g,h){if("config"===b||"key"===b)return!0;if(c(e)&&"on"===b.slice(0,2))a[b]=ca(e,a);else if("style"===b&&null!=e&&d(e))W(a,e,f);else if(null!=h)"href"===b?a.setAttributeNS("http://www.w3.org/1999/xlink","href",e):a.setAttribute("className"===b?"class":b,e);else if(b in a&&!Pa[b])try{("input"!==g||a[b]!==e)&&(a[b]=e)}catch(i){a.setAttribute(b,e)}else a.setAttribute(b,e)}function Y(a,b,c,d,e,f,g){if(b in e&&d===c)"value"===b&&"input"===f&&a.value!==c&&(a.value=c);else{e[b]=c;try{return X(a,b,c,d,f,g)}catch(h){if(h.message.indexOf("Invalid argument")<0)throw h}}}function Z(a,b,c,d,e){for(var f in c)!Da.call(c,f)||!Y(a,f,c[f],d[f],d,b,e);return d}function $(a,b){for(var c=a.length-1;c>-1;c--)if(a[c]&&a[c].parentNode){try{a[c].parentNode.removeChild(a[c])}catch(d){}b=[].concat(b),b[c]&&_(b[c])}a.length&&(a.length=0)}function _(a){a.configContext&&c(a.configContext.onunload)&&(a.configContext.onunload(),a.configContext.onunload=null),a.controllers&&l(a.controllers,function(a){c(a.onunload)&&a.onunload({preventDefault:f})}),a.children&&(Fa(a.children)?l(a.children,_):a.children.tag&&_(a.children))}function aa(a,b){try{a.appendChild(za.createRange().createContextualFragment(b))}catch(c){a.insertAdjacentHTML("beforeend",b)}}function ba(a,b,c){var d=a.childNodes[b];if(d){var e=1!==d.nodeType,f=za.createElement("span");e?(a.insertBefore(f,d||null),f.insertAdjacentHTML("beforebegin",c),a.removeChild(f)):d.insertAdjacentHTML("beforebegin",c)}else aa(a,c);for(var g=[];a.childNodes[b]!==d;)g.push(a.childNodes[b]),b++;return g}function ca(a,b){return function(c){c=c||event,k.redraw.strategy("diff"),k.startComputation();try{return a.call(b,c)}finally{ja()}}}function da(a){var b=Ra.indexOf(a);return 0>b?Ra.push(a)-1:b}function ea(a){function b(){return arguments.length&&(a=arguments[0]),a}return b.toJSON=function(){return a},b}function fa(a,b){var c=b[0]&&null!=b[0].key?b[0].key:null;return{tag:a,args:b,attrs:{key:c}}}function ga(a,b,e,f){if(!f){k.redraw.strategy("all"),k.startComputation(),Ua[e]=b;var g,h=Ta=a=a||{};return g=d(a.tag)?n(a):c(a.controller)?m(a.controller,[]):{},h===Ta&&(Wa[e]=g,Va[e]=a),ja(),null===a&&ha(b,e),Wa[e]}null==a&&ha(b,e)}function ha(a,b){Ua.splice(b,1),Wa.splice(b,1),Va.splice(b,1),qa(a),Ra.splice(da(a),1)}function ia(){Za&&(Za(),Za=null),l(Ua,function(a,b){var e=Va[b],f=Wa[b];if(f){var g;g=d(e.tag)?o(e,f):c(e.view)?e.view(f):"",k.render(a,g)}}),$a&&($a(),$a=null),Xa=null,Ya=new Date,k.redraw.strategy("diff")}function ja(){"none"===k.redraw.strategy()?(Ka--,k.redraw.strategy("diff")):k.endComputation()}function ka(a){return a.slice(db[k.route.mode].length)}function la(a,b,c){bb={};var d=c.indexOf("?");-1!==d&&(bb=pa(c.substr(d+1,c.length)),c=c.substr(0,d));var e=Object.keys(b),f=e.indexOf(c);if(-1!==f)return k.mount(a,b[e[f]]),!0;for(var g in b)if(Da.call(b,g)){if(g===c)return k.mount(a,b[g]),!0;var h=new RegExp("^"+g.replace(/:[^\/]+?\.{3}/g,"(.*?)").replace(/:[^\/]+/g,"([^\\/]+)")+"/?$");if(h.test(c))return c.replace(h,function(){var c=g.match(/:[^\/]+/g)||[],d=[].slice.call(arguments,1,-2);l(c,function(a,b){bb[a.replace(/:|\./g,"")]=decodeURIComponent(d[b])}),k.mount(a,b[g])}),!0}}function ma(a){if(a=a||event,!(a.ctrlKey||a.metaKey||a.shiftKey||2===a.which)){a.preventDefault?a.preventDefault():a.returnValue=!1;var b,c=a.currentTarget||a.srcElement;for(b="pathname"===k.route.mode&&c.search?pa(c.search.slice(1)):{};c&&!/a/i.test(c.nodeName);)c=c.parentNode;Ka=0,k.route(c[k.route.mode].slice(db[k.route.mode].length),b)}}function na(){"hash"!==k.route.mode&&Aa.hash?Aa.hash=Aa.hash:a.scrollTo(0,0)}function oa(a,c){var e={},f=[];for(var g in a)if(Da.call(a,g)){var h=c?c+"["+g+"]":g,i=a[g];if(null===i)f.push(encodeURIComponent(h));else if(d(i))f.push(oa(i,h));else if(Fa(i)){var j=[];e[h]=e[h]||{},l(i,function(a){e[h][a]||(e[h][a]=!0,j.push(encodeURIComponent(h)+"="+encodeURIComponent(a)))}),f.push(j.join("&"))}else i!==b&&f.push(encodeURIComponent(h)+"="+encodeURIComponent(i))}return f.join("&")}function pa(a){if(""===a||null==a)return{};"?"===a.charAt(0)&&(a=a.slice(1));var b=a.split("&"),c={};return l(b,function(a){var b=a.split("="),d=decodeURIComponent(b[0]),e=2===b.length?decodeURIComponent(b[1]):null;null!=c[d]?(Fa(c[d])||(c[d]=[c[d]]),c[d].push(e)):c[d]=e}),c}function qa(a){var c=da(a);$(a.childNodes,Sa[c]),Sa[c]=b}function ra(a,b){var c=k.prop(b);return a.then(c),c.then=function(c,d){return ra(a.then(c,d),b)},c["catch"]=c.then.bind(null,null),c}function sa(a,b){function e(a){i=a||jb,l.map(function(a){i===ib?a.resolve(j):a.reject(j)})}function f(a,b,e,f){if((null!=j&&d(j)||c(j))&&c(a))try{var g=0;a.call(j,function(a){g++||(j=a,b())},function(a){g++||(j=a,e())})}catch(h){k.deferred.onerror(h),j=h,e()}else f()}function g(){var d;try{d=j&&j.then}catch(l){return k.deferred.onerror(l),j=l,i=hb,g()}i===hb&&k.deferred.onerror(j),f(d,function(){i=gb,g()},function(){i=hb,g()},function(){try{i===gb&&c(a)?j=a(j):i===hb&&c(b)&&(j=b(j),i=gb)}catch(g){return k.deferred.onerror(g),j=g,e()}j===h?(j=TypeError(),e()):f(d,function(){e(ib)},e,function(){e(i===gb&&ib)})})}var h=this,i=0,j=0,l=[];h.promise={},h.resolve=function(a){return i||(j=a,i=gb,g()),h},h.reject=function(a){return i||(j=a,i=hb,g()),h},h.promise.then=function(a,b){var c=new sa(a,b);return i===ib?c.resolve(j):i===jb?c.reject(j):l.push(c),c.promise}}function ta(a){return a}function ua(c){var d="mithril_callback_"+(new Date).getTime()+"_"+Math.round(1e16*Math.random()).toString(36),e=za.createElement("script");a[d]=function(f){e.parentNode.removeChild(e),c.onload({type:"load",target:{responseText:f}}),a[d]=b},e.onerror=function(){return e.parentNode.removeChild(e),c.onerror({type:"error",target:{status:500,responseText:JSON.stringify({error:"Error making jsonp request"})}}),a[d]=b,!1},e.onload=function(){return!1},e.src=c.url+(c.url.indexOf("?")>0?"&":"?")+(c.callbackKey?c.callbackKey:"callback")+"="+d+"&"+oa(c.data||{}),za.body.appendChild(e)}function va(b){var d=new a.XMLHttpRequest;if(d.open(b.method,b.url,!0,b.user,b.password),d.onreadystatechange=function(){4===d.readyState&&(d.status>=200&&d.status<300?b.onload({type:"load",target:d}):b.onerror({type:"error",target:d}))},b.serialize===JSON.stringify&&b.data&&"GET"!==b.method&&d.setRequestHeader("Content-Type","application/json; charset=utf-8"),b.deserialize===JSON.parse&&d.setRequestHeader("Accept","application/json, text/*"),c(b.config)){var f=b.config(d,b);null!=f&&(d=f)}var g="GET"!==b.method&&b.data?b.data:"";if(g&&!e(g)&&g.constructor!==a.FormData)throw new Error("Request data should be either be a string or FormData. Check the `serialize` option in `m.request`");return d.send(g),d}function wa(a){return a.dataType&&"jsonp"===a.dataType.toLowerCase()?ua(a):va(a)}function xa(a,b,c){if("GET"===a.method&&"jsonp"!==a.dataType){var d=a.url.indexOf("?")<0?"?":"&",e=oa(b);a.url+=e?d+e:""}else a.data=c(b)}function ya(a,b){return b&&(a=a.replace(/:[a-z]\w+/gi,function(a){var c=a.slice(1),d=b[c];return delete b[c],d})),a}k.version=function(){return"v0.2.3"};var za,Aa,Ba,Ca,Da={}.hasOwnProperty,Ea={}.toString,Fa=Array.isArray||function(a){return"[object Array]"===Ea.call(a)},Ga={AREA:1,BASE:1,BR:1,COL:1,COMMAND:1,EMBED:1,HR:1,IMG:1,INPUT:1,KEYGEN:1,LINK:1,META:1,PARAM:1,SOURCE:1,TRACK:1,WBR:1};k.deps=function(b){return g(a=b||window),a},k.deps(a);var Ha=1,Ia=2,Ja=3,Ka=0;k.startComputation=function(){Ka++},k.endComputation=function(){Ka>1?Ka--:(Ka=0,k.redraw())};var La,Ma={},Na=[],Oa=!1,Pa={list:1,style:1,form:1,type:1,width:1,height:1},Qa={appendChild:function(a){La===b&&(La=za.createElement("html")),za.documentElement&&za.documentElement!==a?za.replaceChild(a,za.documentElement):za.appendChild(a),this.childNodes=za.childNodes},insertBefore:function(a){this.appendChild(a)},childNodes:[]},Ra=[],Sa={};k.render=function(a,c,d){if(!a)throw new Error("Ensure the DOM element being passed to m.route/m.mount/m.render is not undefined.");var e,f=[],g=da(a),h=a===za;e=h||a===za.documentElement?Qa:a,h&&"html"!==c.tag&&(c={tag:"html",attrs:{},children:c}),Sa[g]===b&&$(e.childNodes),d===!0&&qa(a),Sa[g]=U(e,null,b,b,c,Sa[g],!1,0,null,b,f),l(f,function(a){a()})},k.trust=function(a){return a=new String(a),a.$trusted=!0,a},k.prop=function(a){return(null!=a&&d(a)||c(a))&&c(a.then)?ra(a):ea(a)};var Ta,Ua=[],Va=[],Wa=[],Xa=null,Ya=0,Za=null,$a=null,_a=16;k.component=function(a){for(var b=new Array(arguments.length-1),c=1;c<arguments.length;c++)b[c-1]=arguments[c];return fa(a,b)},k.mount=k.module=function(a,b){if(!a)throw new Error("Please ensure the DOM element exists before rendering a template into it.");var d=Ua.indexOf(a);0>d&&(d=Ua.length);var e=!1,f={preventDefault:function(){e=!0,Za=$a=null}};return l(Na,function(a){a.handler.call(a.controller,f),a.controller.onunload=null}),e?l(Na,function(a){a.controller.onunload=a.handler}):Na=[],Wa[d]&&c(Wa[d].onunload)&&Wa[d].onunload(f),ga(b,a,d,e)};var ab=!1;k.redraw=function(b){if(!ab){ab=!0,b&&(Oa=!0);try{Xa&&!b?(Ba===a.requestAnimationFrame||new Date-Ya>_a)&&(Xa>0&&Ca(Xa),Xa=Ba(ia,_a)):(ia(),Xa=Ba(function(){Xa=null},_a))}finally{ab=Oa=!1}}},k.redraw.strategy=k.prop(),k.withAttr=function(a,b,c){return function(d){d=d||event;var e=d.currentTarget||this,f=c||this,g=a in e?e[a]:e.getAttribute(a);b.call(f,g)}};var bb,cb,db={pathname:"",hash:"#",search:"?"},eb=f,fb=!1;k.route=function(b,c,d,f){if(0===arguments.length)return cb;if(3===arguments.length&&e(c)){eb=function(a){var e=cb=ka(a);if(!la(b,d,e)){if(fb)throw new Error("Ensure the default route matches one of the routes defined in m.route");fb=!0,k.route(c,!0),fb=!1}};var g="hash"===k.route.mode?"onhashchange":"onpopstate";return a[g]=function(){var a=Aa[k.route.mode];"pathname"===k.route.mode&&(a+=Aa.search),cb!==ka(a)&&eb(a)},Za=na,void a[g]()}if(b.addEventListener||b.attachEvent){var h="pathname"!==k.route.mode?Aa.pathname:"";return b.href=h+db[k.route.mode]+f.attrs.href,void(b.addEventListener?(b.removeEventListener("click",ma),b.addEventListener("click",ma)):(b.detachEvent("onclick",ma),b.attachEvent("onclick",ma)))}if(e(b)){var i=cb;cb=b;var j,l=c||{},m=cb.indexOf("?");j=m>-1?pa(cb.slice(m+1)):{};for(var n in l)Da.call(l,n)&&(j[n]=l[n]);var o,p=oa(j);o=m>-1?cb.slice(0,m):cb,p&&(cb=o+(-1===o.indexOf("?")?"?":"&")+p);var q=(3===arguments.length?d:c)===!0||i===b;if(a.history.pushState){var r=q?"replaceState":"pushState";Za=na,$a=function(){a.history[r](null,za.title,db[k.route.mode]+cb)},eb(db[k.route.mode]+cb)}else Aa[k.route.mode]=cb,eb(db[k.route.mode]+cb)}},k.route.param=function(a){if(!bb)throw new Error("You must call m.route(element, defaultRoute, routes) before calling m.route.param()");return a?bb[a]:bb},k.route.mode="search",k.route.buildQueryString=oa,k.route.parseQueryString=pa,k.deferred=function(){var a=new sa;return a.promise=ra(a.promise),a};var gb=1,hb=2,ib=3,jb=4;return k.deferred.onerror=function(a){if("[object Error]"===Ea.call(a)&&!/ Error/.test(a.constructor.toString()))throw Ka=0,a},k.sync=function(a){function b(a,b){return function(g){return e[a]=g,b||(f="reject"),0===--d&&(c.promise(e),c[f](e)),g}}var c=k.deferred(),d=a.length,e=[],f="resolve";return a.length>0?l(a,function(a,c){a.then(b(c,!0),b(c,!1))}):c.resolve([]),c.promise},k.request=function(a){a.background!==!0&&k.startComputation();var b,c,d,e=new sa,f=a.dataType&&"jsonp"===a.dataType.toLowerCase();return f?(b=a.serialize=c=a.deserialize=ta,d=function(a){return a.responseText}):(b=a.serialize=a.serialize||JSON.stringify,c=a.deserialize=a.deserialize||JSON.parse,d=a.extract||function(a){return a.responseText.length||c!==JSON.parse?a.responseText:null}),a.method=(a.method||"GET").toUpperCase(),a.url=ya(a.url,a.data),xa(a,a.data,b),a.onload=a.onerror=function(b){try{b=b||event;var f=c(d(b.target,a));"load"===b.type?(a.unwrapSuccess&&(f=a.unwrapSuccess(f,b.target)),Fa(f)&&a.type?l(f,function(b,c){f[c]=new a.type(b)}):a.type&&(f=new a.type(f)),e.resolve(f)):(a.unwrapError&&(f=a.unwrapError(f,b.target)),e.reject(f))}catch(g){e.reject(g)}finally{a.background!==!0&&k.endComputation()}},wa(a),e.promise=ra(e.promise,a.initialValue),e.promise},k});
//# sourceMappingURL=mithril.min.js.map