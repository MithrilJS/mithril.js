/*
Mithril v0.2.1
http://github.com/lhorie/mithril.js
(c) Leo Horie
License: MIT
*/
var m=function a(b,c){"use strict";function d(a){return"function"==typeof a}function e(a){return"[object Object]"===qa.call(a)}function f(a){return"[object String]"===qa.call(a)}function g(a){ka=a.document,la=a.location,na=a.cancelAnimationFrame||a.clearTimeout,ma=a.requestAnimationFrame||a.setTimeout}function h(a,b){for(var c=[],d=1;d<arguments.length;d++)c[d-1]=arguments[d];if(e(a))return V(a,c);var g,h=null!=b&&e(b)&&!("tag"in b||"view"in b||"subtree"in b),i=h?b:{},j="class"in i?"class":"className",k={tag:"div",attrs:{}},l=[];if(!f(a))throw new Error("selector in m(selector, attrs, children) should be a string");for(;null!=(g=ra.exec(a));)if(""===g[1]&&g[2])k.tag=g[2];else if("#"===g[1])k.attrs.id=g[2];else if("."===g[1])l.push(g[2]);else if("["===g[3][0]){var m=sa.exec(g[3]);k.attrs[m[1]]=m[3]||(m[2]?"":!0)}var n=h?c.slice(1):c;1===n.length&&pa(n[0])?k.children=n[0]:k.children=n;for(var o in i)i.hasOwnProperty(o)&&(o===j&&null!=i[o]&&""!==i[o]?(l.push(i[o]),k.attrs[o]=""):k.attrs[o]=i[o]);return l.length&&(k.attrs[j]=l.join(" ")),k}function i(a,b){for(var c=0;c<a.length&&!b(a[c],c++););}function j(a,b){i(a,function(a,c){return(a=a&&a.attrs)&&null!=a.key&&b(a,c)})}function k(a){try{if(null==a||null==a.toString())return""}catch(b){return""}return a}function l(a,b,c,d){try{n(a,b,c),b.nodeValue=d}catch(e){}}function m(a){for(var b=0;b<a.length;b++)pa(a[b])&&(a=a.concat.apply([],a),b--);return a}function n(a,b,c){a.insertBefore(b,a.childNodes[c]||null)}function o(a,b,c,d){j(a,function(a,d){b[a=a.key]=b[a]?{action:ya,index:d,from:b[a].index,element:c.nodes[b[a].index]||ka.createElement("div")}:{action:xa,index:d}});var e=[];for(var f in b)e.push(b[f]);var g=e.sort(N),h=new Array(c.length);return h.nodes=c.nodes.slice(),i(g,function(b){var e=b.index;if(b.action===wa&&(P(c[e].nodes,c[e]),h.splice(e,1)),b.action===xa){var f=ka.createElement("div");f.key=a[e].attrs.key,n(d,f,e),h.splice(e,0,{attrs:{key:a[e].attrs.key},nodes:[f]}),h.nodes[e]=f}if(b.action===ya){var g=b.element,i=d.childNodes[e];i!==g&&null!==g&&d.insertBefore(g,i||null),h[e]=c[b.from],h.nodes[e]=g}}),h}function p(a,b,c,d){var e=a.length!==b.length;return e||j(a,function(a,c){var d=b[c];return e=d&&d.attrs&&d.attrs.key!==a.key}),e?o(a,c,b,d):b}function q(a,b,c){i(a,function(a,d){null!=b[d]&&c.push.apply(c,b[d].nodes)}),i(b.nodes,function(a,d){null!=a.parentNode&&c.indexOf(a)<0&&P([a],[b[d]])}),a.length<b.length&&(b.length=a.length),b.nodes=c}function r(a){var b=0;j(a,function(){return i(a,function(a){(a=a&&a.attrs)&&null==a.key&&(a.key="__mithril__"+b++)}),1})}function s(a,b,c){(a.tag!==b.tag||c.sort().join()!==Object.keys(b.attrs).sort().join()||a.attrs.id!==b.attrs.id||a.attrs.key!==b.attrs.key||"all"===h.redraw.strategy()&&(!b.configContext||b.configContext.retain!==!0)||"diff"===h.redraw.strategy()&&b.configContext&&b.configContext.retain===!1)&&(b.nodes.length&&P(b.nodes),b.configContext&&d(b.configContext.onunload)&&b.configContext.onunload(),b.controllers&&i(b.controllers,function(a){a.unload&&a.onunload({preventDefault:ua})}))}function t(a,b){return a.attrs.xmlns?a.attrs.xmlns:"svg"===a.tag?"http://www.w3.org/2000/svg":"math"===a.tag?"http://www.w3.org/1998/Math/MathML":b}function u(a,b,c){c.length&&(a.views=b,a.controllers=c,i(c,function(a){if(a.onunload&&a.onunload.$old&&(a.onunload=a.onunload.$old),Pa&&a.onunload){var b=a.onunload;a.onunload=ua,a.onunload.$old=b}}))}function v(a,b,c,e,f){if(d(b.attrs.config)){var g=f.configContext=f.configContext||{};a.push(function(){return b.attrs.config.call(b,c,!e,g,f)})}}function w(a,b,d,e,f,g,h,i){var j=a.nodes[0];return e&&O(j,b.tag,b.attrs,a.attrs,f),a.children=M(j,b.tag,c,c,b.children,a.children,!1,0,b.attrs.contenteditable?j:d,f,h),a.nodes.intact=!0,i.length&&(a.views=g,a.controllers=i),j}function x(a,b,c){var d;a.$trusted?d=R(b,c,a):(d=[ka.createTextNode(a)],b.nodeName.match(ta)||n(b,d[0],c));var e="string"==typeof a||"number"==typeof a||"boolean"==typeof a?new a.constructor(a):a;return e.nodes=d,e}function y(a,b,c,d,e,f){var g=b.nodes;return d&&d===ka.activeElement||(a.$trusted?(P(g,b),g=R(c,e,a)):"textarea"===f?c.value=a:d?d.innerHTML=a:((1===g[0].nodeType||g.length>1)&&(P(b.nodes,b),g=[ka.createTextNode(a)]),l(c,g[0],e,a))),b=new a.constructor(a),b.nodes=g,b}function z(a,b,c,d,e,f,g){return 0===a.nodes.length?x(b,d,c):a.valueOf()!==b.valueOf()||e===!0?y(b,a,d,f,c,g):(a.nodes.intact=!0,a)}function A(a){if(a.$trusted){var b=a.match(/<[^\/]|\>\s*[^<]/g);if(null!=b)return b.length}else if(pa(a))return a.length;return 1}function B(a,b,d,e,f,g,h,i,k){a=m(a);var l=[],n=b.length===a.length,o=0,s={},t=!1;j(b,function(a,c){t=!0,s[b[c].attrs.key]={action:wa,index:c}}),r(a),t&&(b=p(a,b,s,d));for(var u=0,v=0,w=a.length;w>v;v++){var x=M(d,f,b,e,a[v],b[u],g,e+o||o,h,i,k);x!==c&&(n=n&&x.nodes.intact,o+=A(x),b[u++]=x)}return n||q(a,b,l),b}function C(a,b,c,d,e){if(null!=b){if(qa.call(b)===qa.call(a))return b;if(e&&e.nodes){var f=c-d,g=f+(pa(a)?a:b.nodes).length;P(e.nodes.slice(f,g),e.slice(f,g))}else b.nodes&&P(b.nodes,b)}return b=new a.constructor,b.tag&&(b={}),b.nodes=[],b}function D(a,b){return b===c?a.attrs.is?ka.createElement(a.tag,a.attrs.is):ka.createElement(a.tag):a.attrs.is?ka.createElementNS(b,a.tag,a.attrs.is):ka.createElementNS(b,a.tag)}function E(a,b,c,d){return d?O(b,a.tag,a.attrs,{},c):a.attrs}function F(a,b,d,e,f,g){return null!=a.children&&a.children.length>0?M(b,a.tag,c,c,a.children,d.children,!0,0,a.attrs.contenteditable?b:e,f,g):a.children}function G(a,b,c,d,e,f,g){var h={tag:a.tag,attrs:b,children:c,nodes:[d]};return u(h,f,g),h.children&&!h.children.nodes&&(h.children.nodes=[]),"select"===a.tag&&"value"in a.attrs&&O(d,a.tag,{value:a.attrs.value},{},e),h}function H(a,b,c,d){var e="diff"===h.redraw.strategy()&&a?a.indexOf(b):-1;return e>-1?c[e]:"function"==typeof d?new d:{}}function I(a,b,c,d){null!=d.onunload&&La.push({controller:d,handler:d.onunload}),a.push(c),b.push(d)}function J(a,b,c,d,e,f){var g=H(c.views,b,d,a.controller),h=+(a&&a.attrs&&a.attrs.key);return a=0===Pa||Oa||d&&d.indexOf(g)>-1?a.view(g):{tag:"placeholder"},"retain"===a.subtree?c:(h===h&&((a.attrs=a.attrs||{}).key=h),I(f,e,b,g),a)}function K(a,b,c,d){for(var e=b&&b.controllers;null!=a.view;)a=J(a,a.view.$original||a.view,b,e,d,c);return a}function L(a,b,c,d,e,g,h,i){var j=[],k=[];if(a=K(a,b,j,k),!a.tag&&k.length)throw new Error("Component template must return a virtual element, not an array, string, etc.");a.attrs=a.attrs||{},b.attrs=b.attrs||{};var l=Object.keys(a.attrs),m=l.length>("key"in a.attrs?1:0);if(s(a,b,l),f(a.tag)){var o=0===b.nodes.length;h=t(a,h);var p;if(o){p=D(a,h);var q=E(a,p,h,m),r=F(a,p,b,c,h,i);b=G(a,q,r,p,h,j,k)}else p=w(b,a,c,m,h,j,i,k);return(o||g===!0&&null!=p)&&n(d,p,e),v(i,a,p,o,b),b}}function M(a,b,c,f,g,h,i,j,l,m,n){return g=k(g),"retain"===g.subtree?h:(h=C(g,h,j,f,c),pa(g)?B(g,h,a,j,b,i,l,m,n):null!=g&&e(g)?L(g,h,l,a,j,i,m,n):d(g)?h:z(h,g,j,a,i,l,b))}function N(a,b){return a.action-b.action||a.index-b.index}function O(a,b,c,f,g){for(var h in c){var i=c[h],j=f[h];if(h in f&&j===i)"value"===h&&"input"===b&&a.value!=i&&(a.value=i);else{f[h]=i;try{if("config"===h||"key"===h)continue;if(d(i)&&"on"===h.slice(0,2))a[h]=S(i,a);else if("style"===h&&null!=i&&e(i)){for(var k in i)(null==j||j[k]!==i[k])&&(a.style[k]=i[k]);for(var k in j)k in i||(a.style[k]="")}else null!=g?"href"===h?a.setAttributeNS("http://www.w3.org/1999/xlink","href",i):a.setAttribute("className"===h?"class":h,i):h in a&&"list"!==h&&"style"!==h&&"form"!==h&&"type"!==h&&"width"!==h&&"height"!==h?("input"!==b||a[h]!==i)&&(a[h]=i):a.setAttribute(h,i)}catch(l){if(l.message.indexOf("Invalid argument")<0)throw l}}}return f}function P(a,b){for(var c=a.length-1;c>-1;c--)if(a[c]&&a[c].parentNode){try{a[c].parentNode.removeChild(a[c])}catch(d){}b=[].concat(b),b[c]&&Q(b[c])}a.length&&(a.length=0)}function Q(a){a.configContext&&d(a.configContext.onunload)&&(a.configContext.onunload(),a.configContext.onunload=null),a.controllers&&i(a.controllers,function(a){d(a.onunload)&&a.onunload({preventDefault:ua})}),a.children&&(pa(a.children)?i(a.children,Q):a.children.tag&&Q(a.children))}function R(a,b,c){var d=a.childNodes[b];if(d){var e=1!==d.nodeType,f=ka.createElement("span");e?(a.insertBefore(f,d||null),f.insertAdjacentHTML("beforebegin",c),a.removeChild(f)):d.insertAdjacentHTML("beforebegin",c)}else za(a,c);for(var g=[];a.childNodes[b]!==d;)g.push(a.childNodes[b]),b++;return g}function S(a,b){return function(c){c=c||event,h.redraw.strategy("diff"),h.startComputation();try{return a.call(b,c)}finally{Y()}}}function T(a){var b=Ba.indexOf(a);return 0>b?Ba.push(a)-1:b}function U(a){var b=function(){return arguments.length&&(a=arguments[0]),a};return b.toJSON=function(){return a},b}function V(a,b){var c=function(){return(a.controller||ua).apply(this,b)||this};a.controller&&(c.prototype=a.controller.prototype);var d=function(c){var d=arguments.length>1?b.concat([].slice.call(arguments,1)):b;return a.view.apply(a,d?[c].concat(d):[c])};d.$original=a.view;var e={controller:c,view:d};return b[0]&&null!=b[0].key&&(e.attrs={key:b[0].key}),e}function W(a,b){Ea.splice(b,1),Ga.splice(b,1),Fa.splice(b,1),da(a),Ba.splice(T(a),1)}function X(){Ja&&(Ja(),Ja=null),i(Ea,function(a,b){var c=Fa[b];if(Ga[b]){var d=[Ga[b]];h.render(a,c.view?c.view(Ga[b],d):"")}}),Ka&&(Ka(),Ka=null),Ha=null,Ia=new Date,h.redraw.strategy("diff")}function Y(){"none"===h.redraw.strategy()?(Pa--,h.redraw.strategy("diff")):h.endComputation()}function Z(a){return a.slice(Sa[h.route.mode].length)}function $(a,b,c){Qa={};var d=c.indexOf("?");-1!==d&&(Qa=ca(c.substr(d+1,c.length)),c=c.substr(0,d));var e=Object.keys(b),f=e.indexOf(c);if(-1!==f)return h.mount(a,b[e[f]]),!0;for(var g in b){if(g===c)return h.mount(a,b[g]),!0;var j=new RegExp("^"+g.replace(/:[^\/]+?\.{3}/g,"(.*?)").replace(/:[^\/]+/g,"([^\\/]+)")+"/?$");if(j.test(c))return c.replace(j,function(){var c=g.match(/:[^\/]+/g)||[],d=[].slice.call(arguments,1,-2);i(c,function(a,b){Qa[a.replace(/:|\./g,"")]=decodeURIComponent(d[b])}),h.mount(a,b[g])}),!0}}function _(a){if(a=a||event,!a.ctrlKey&&!a.metaKey&&2!==a.which){a.preventDefault?a.preventDefault():a.returnValue=!1;for(var b=a.currentTarget||a.srcElement,c="pathname"===h.route.mode&&b.search?ca(b.search.slice(1)):{};b&&"A"!==b.nodeName.toUpperCase();)b=b.parentNode;h.route(b[h.route.mode].slice(Sa[h.route.mode].length),c)}}function aa(){"hash"!==h.route.mode&&la.hash?la.hash=la.hash:b.scrollTo(0,0)}function ba(a,b){var d={},f=[];for(var g in a){var h=b?b+"["+g+"]":g,j=a[g];if(null===j)f.push(encodeURIComponent(h));else if(e(j))f.push(ba(j,h));else if(pa(j)){var k=[];d[h]=d[h]||{},i(j,function(a){d[h][a]||(d[h][a]=!0,k.push(encodeURIComponent(h)+"="+encodeURIComponent(a)))}),f.push(k.join("&"))}else j!==c&&f.push(encodeURIComponent(h)+"="+encodeURIComponent(j))}return f.join("&")}function ca(a){if(""===a||null==a)return{};"?"===a.charAt(0)&&(a=a.slice(1));var b=a.split("&"),c={};return i(b,function(a){var b=a.split("="),d=decodeURIComponent(b[0]),e=2===b.length?decodeURIComponent(b[1]):null;null!=c[d]?(pa(c[d])||(c[d]=[c[d]]),c[d].push(e)):c[d]=e}),c}function da(a){var b=T(a);P(a.childNodes,Ca[b]),Ca[b]=c}function ea(a,b){var c=h.prop(b);return a.then(c),c.then=function(c,d){return ea(a.then(c,d),b)},c["catch"]=c.then.bind(null,null),c["finally"]=function(a){var d=function(){return h.deferred().resolve(a()).promise};return c.then(function(a){return ea(d().then(function(){return a}),b)},function(a){return ea(d().then(function(){throw new Error(a)}),b)})},c}function fa(a,b){function c(a){o=a||m,i(q,function(a){o===l?a.resolve(p):a.reject(p)})}function f(a,b,c,f){if((null!=p&&e(p)||d(p))&&d(a))try{var g=0;a.call(p,function(a){g++||(p=a,b())},function(a){g++||(p=a,c())})}catch(i){h.deferred.onerror(i),p=i,c()}else f()}function g(){var e;try{e=p&&p.then}catch(i){return h.deferred.onerror(i),p=i,o=k,g()}f(e,function(){o=j,g()},function(){o=k,g()},function(){try{o===j&&d(a)?p=a(p):o===k&&d(b)&&(p=b(p),o=j)}catch(g){return h.deferred.onerror(g),p=g,c()}p===n?(p=TypeError(),c()):f(e,function(){c(l)},c,function(){c(o===j&&l)})})}var j=1,k=2,l=3,m=4,n=this,o=0,p=0,q=[];n.promise={},n.resolve=function(a){return o||(p=a,o=j,g()),this},n.reject=function(a){return o||(p=a,o=k,g()),this},n.promise.then=function(a,b){var c=new fa(a,b);return o===l?c.resolve(p):o===m?c.reject(p):q.push(c),c.promise}}function ga(a){return a}function ha(a){if(!a.dataType||"jsonp"!==a.dataType.toLowerCase()){var e=new b.XMLHttpRequest;if(e.open(a.method,a.url,!0,a.user,a.password),e.onreadystatechange=function(){4===e.readyState&&(e.status>=200&&e.status<300?a.onload({type:"load",target:e}):a.onerror({type:"error",target:e}))},a.serialize===JSON.stringify&&a.data&&"GET"!==a.method&&e.setRequestHeader("Content-Type","application/json; charset=utf-8"),a.deserialize===JSON.parse&&e.setRequestHeader("Accept","application/json, text/*"),d(a.config)){var g=a.config(e,a);null!=g&&(e=g)}var h="GET"!==a.method&&a.data?a.data:"";if(h&&!f(h)&&h.constructor!==b.FormData)throw new Error("Request data should be either be a string or FormData. Check the `serialize` option in `m.request`");return e.send(h),e}var i="mithril_callback_"+(new Date).getTime()+"_"+Math.round(1e16*Math.random()).toString(36),j=ka.createElement("script");b[i]=function(d){j.parentNode.removeChild(j),a.onload({type:"load",target:{responseText:d}}),b[i]=c},j.onerror=function(){return j.parentNode.removeChild(j),a.onerror({type:"error",target:{status:500,responseText:JSON.stringify({error:"Error making jsonp request"})}}),b[i]=c,!1},j.onload=function(){return!1},j.src=a.url+(a.url.indexOf("?")>0?"&":"?")+(a.callbackKey?a.callbackKey:"callback")+"="+i+"&"+ba(a.data||{}),ka.body.appendChild(j)}function ia(a,b,c){if("GET"===a.method&&"jsonp"!==a.dataType){var d=a.url.indexOf("?")<0?"?":"&",e=ba(b);a.url=a.url+(e?d+e:"")}else a.data=c(b);return a}function ja(a,b){var c=a.match(/:[a-z]\w+/gi);return c&&b&&i(c,function(c){var d=c.slice(1);a=a.replace(c,b[d]),delete b[d]}),a}var ka,la,ma,na,oa="v0.2.1",pa=Array.isArray||function(a){return"[object Array]"===qa.call(a)},qa={}.toString,ra=/(?:(^|#|\.)([^#\.\[\]]+))|(\[.+?\])/g,sa=/\[(.+?)(?:=("|'|)(.*?)\2)?\]/,ta=/^(AREA|BASE|BR|COL|COMMAND|EMBED|HR|IMG|INPUT|KEYGEN|LINK|META|PARAM|SOURCE|TRACK|WBR)$/,ua=function(){};g(b),h.version=function(){return oa};var va,wa=1,xa=2,ya=3,za=function(){var a=function(a,b){a.appendChild(ka.createRange().createContextualFragment(b))},b=function(a,b){a.insertAdjacentHTML("beforeend",b)};try{return ka.createRange().createContextualFragment("x"),a}catch(c){return b}}(),Aa={appendChild:function(a){va===c&&(va=ka.createElement("html")),ka.documentElement&&ka.documentElement!==a?ka.replaceChild(a,ka.documentElement):ka.appendChild(a),this.childNodes=ka.childNodes},insertBefore:function(a){this.appendChild(a)},childNodes:[]},Ba=[],Ca={};h.render=function(a,b,d){var e=[];if(!a)throw new Error("Ensure the DOM element being passed to m.route/m.mount/m.render is not undefined.");var f=T(a),g=a===ka,h=g||a===ka.documentElement?Aa:a;g&&"html"!==b.tag&&(b={tag:"html",attrs:{},children:b}),Ca[f]===c&&P(h.childNodes),d===!0&&da(a),Ca[f]=M(h,null,c,c,b,Ca[f],!1,0,null,c,e),i(e,function(a){a()})},h.trust=function(a){return a=new String(a),a.$trusted=!0,a},h.prop=function(a){return(null!=a&&e(a)||d(a))&&d(a.then)?ea(a):U(a)};var Da,Ea=[],Fa=[],Ga=[],Ha=null,Ia=0,Ja=null,Ka=null,La=[],Ma=16;h.component=function(a){for(var b=[],c=1;c<arguments.length;c++)b.push(arguments[c]);return V(a,b)},h.mount=h.module=function(a,b){if(!a)throw new Error("Please ensure the DOM element exists before rendering a template into it.");var c=Ea.indexOf(a);0>c&&(c=Ea.length);var e=!1,f={preventDefault:function(){e=!0,Ja=Ka=null}};i(La,function(a){a.handler.call(a.controller,f),a.controller.onunload=null}),e?i(La,function(a){a.controller.onunload=a.handler}):La=[],Ga[c]&&d(Ga[c].onunload)&&Ga[c].onunload(f);var g=null===b;if(!e){h.redraw.strategy("all"),h.startComputation(),Ea[c]=a;var j=Da=b?b:b={controller:ua},k=new(b.controller||ua);return j===Da&&(Ga[c]=k,Fa[c]=b),Y(),g&&W(a,c),Ga[c]}g&&W(a,c)};var Na=!1,Oa=!1;h.redraw=function(a){if(!Na){Na=!0,a&&(Oa=!0);try{Ha&&!a?(ma===b.requestAnimationFrame||new Date-Ia>Ma)&&(Ha>0&&na(Ha),Ha=ma(X,Ma)):(X(),Ha=ma(function(){Ha=null},Ma))}finally{Na=Oa=!1}}},h.redraw.strategy=h.prop();var Pa=0;h.startComputation=function(){Pa++},h.endComputation=function(){Pa>1?Pa--:(Pa=0,h.redraw())},h.withAttr=function(a,b,c){return function(d){d=d||event;var e=d.currentTarget||this,f=c||this;b.call(f,a in e?e[a]:e.getAttribute(a))}};var Qa,Ra,Sa={pathname:"",hash:"#",search:"?"},Ta=ua,Ua=!1;return h.route=function(a,c,d,e){if(0===arguments.length)return Ra;if(3===arguments.length&&f(c)){Ta=function(b){var e=Ra=Z(b);if(!$(a,d,e)){if(Ua)throw new Error("Ensure the default route matches one of the routes defined in m.route");Ua=!0,h.route(c,!0),Ua=!1}};var g="hash"===h.route.mode?"onhashchange":"onpopstate";b[g]=function(){var a=la[h.route.mode];"pathname"===h.route.mode&&(a+=la.search),Ra!==Z(a)&&Ta(a)},Ja=aa,b[g]()}else if(a.addEventListener||a.attachEvent)a.href=("pathname"!==h.route.mode?la.pathname:"")+Sa[h.route.mode]+e.attrs.href,a.addEventListener?(a.removeEventListener("click",_),a.addEventListener("click",_)):(a.detachEvent("onclick",_),a.attachEvent("onclick",_));else if(f(a)){var i=Ra;Ra=a;var j=c||{},k=Ra.indexOf("?"),l=k>-1?ca(Ra.slice(k+1)):{};for(var m in j)l[m]=j[m];var n=ba(l),o=k>-1?Ra.slice(0,k):Ra;n&&(Ra=o+(-1===o.indexOf("?")?"?":"&")+n);var p=(3===arguments.length?d:c)===!0||i===a;b.history.pushState?(Ja=aa,Ka=function(){b.history[p?"replaceState":"pushState"](null,ka.title,Sa[h.route.mode]+Ra)},Ta(Sa[h.route.mode]+Ra)):(la[h.route.mode]=Ra,Ta(Sa[h.route.mode]+Ra))}},h.route.param=function(a){if(!Qa)throw new Error("You must call m.route(element, defaultRoute, routes) before calling m.route.param()");return a?Qa[a]:Qa},h.route.mode="search",h.route.buildQueryString=ba,h.route.parseQueryString=ca,h.deferred=function(){var a=new fa;return a.promise=ea(a.promise),a},h.deferred.onerror=function(a){if("[object Error]"===qa.call(a)&&!a.constructor.toString().match(/ Error/))throw Pa=0,a},h.sync=function(a){function b(a,b){return function(g){return f[a]=g,b||(c="reject"),0===--e&&(d.promise(f),d[c](f)),g}}var c="resolve",d=h.deferred(),e=a.length,f=new Array(e);return a.length>0?i(a,function(a,c){a.then(b(c,!0),b(c,!1))}):d.resolve([]),d.promise},h.request=function(a){a.background!==!0&&h.startComputation();var b=new fa,c=a.dataType&&"jsonp"===a.dataType.toLowerCase(),d=a.serialize=c?ga:a.serialize||JSON.stringify,e=a.deserialize=c?ga:a.deserialize||JSON.parse,f=c?function(a){return a.responseText}:a.extract||function(a){return 0===a.responseText.length&&e===JSON.parse?null:a.responseText};return a.method=(a.method||"GET").toUpperCase(),a.url=ja(a.url,a.data),a=ia(a,a.data,d),a.onload=a.onerror=function(c){try{c=c||event;var d=("load"===c.type?a.unwrapSuccess:a.unwrapError)||ga,g=d(e(f(c.target,a)),c.target);"load"===c.type&&(pa(g)&&a.type?i(g,function(b,c){g[c]=new a.type(b)}):a.type&&(g=new a.type(g))),b["load"===c.type?"resolve":"reject"](g)}catch(c){h.deferred.onerror(c),b.reject(c)}a.background!==!0&&h.endComputation()},ha(a),b.promise=ea(b.promise,a.initialValue),b.promise},h.deps=function(a){return g(b=a||b),b},h.deps.factory=a,h}("undefined"!=typeof window?window:{});"object"==typeof module&&null!=module&&module.exports?module.exports=m:"function"==typeof define&&define.amd&&define(function(){return m});
//# sourceMappingURL=mithril.min.js.map