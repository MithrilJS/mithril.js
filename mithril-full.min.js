new function(){function l(a,b,f,c,h,g){return{tag:a,key:b,attrs:f,children:c,text:h,dom:g,domSize:void 0,state:{},events:void 0,instance:void 0,skip:!1}}function t(a){if(null==a||"string"!==typeof a&&null==a.view)throw Error("The selector must be either a string or a component.");if("string"===typeof a&&void 0===J[a]){for(var b,f,c=[],h={};b=W.exec(a);){var g=b[1],u=b[2];""===g&&""!==u?f=u:"#"===g?h.id=u:"."===g?c.push(u):"["===b[3][0]&&((g=b[6])&&(g=g.replace(/\\(["'])/g,"$1").replace(/\\\\/g,"\\")),
"class"===b[4]?c.push(g):h[b[4]]=g||!0)}0<c.length&&(h.className=c.join(" "));J[a]=function(a,b){var c=!1,g,d,w=a.className||a["class"],k;for(k in h)a[k]=h[k];void 0!==w&&(void 0!==a["class"]&&(a["class"]=void 0,a.className=w),void 0!==h.className&&(a.className=h.className+" "+w));for(k in a)if("key"!==k){c=!0;break}b instanceof Array&&1==b.length&&null!=b[0]&&"#"===b[0].tag?d=b[0].children:g=b;return l(f||"div",a.key,c?a:void 0,g,d,void 0)}}var n;null!=arguments[1]&&("object"!==typeof arguments[1]||
void 0!==arguments[1].tag||arguments[1]instanceof Array)?c=1:(n=arguments[1],c=2);if(arguments.length===c+1)b=arguments[c]instanceof Array?arguments[c]:[arguments[c]];else for(b=[];c<arguments.length;c++)b.push(arguments[c]);return"string"===typeof a?J[a](n||{},l.normalizeChildren(b)):l(a,n&&n.key,n||{},l.normalizeChildren(b),void 0,void 0)}function C(){function a(){0<arguments.length&&arguments[0]!==D&&N(a,arguments[0]);return a._state.value}X(a);0<arguments.length&&arguments[0]!==D&&N(a,arguments[0]);
return a}function X(a){a.constructor=C;a._state={id:Y++,value:void 0,state:0,derive:void 0,recover:void 0,deps:{},parents:[],endStream:void 0};a.map=a["fantasy-land/map"]=Z;a["fantasy-land/ap"]=aa;a["fantasy-land/of"]=C;a.valueOf=O;a.toJSON=ba;a.toString=O;Object.defineProperties(a,{end:{get:function(){if(!a._state.endStream){var b=C();b.map(function(f){!0===f&&(P(a),P(b));return f});a._state.endStream=b}return a._state.endStream}}})}function N(a,b){Q(a,b);for(var f in a._state.deps)R(a._state.deps[f],
!1);a._state.changed=!1;for(var c in a._state.deps)a._state.deps[c]._state.changed=!1}function Q(a,b){a._state.value=b;a._state.changed=!0;2!==a._state.state&&(a._state.state=1)}function R(a,b){var f=a._state.parents;if(0<f.length&&f.every(ca)&&(b||f.some(S))){f=a._state.derive();if(f===D)return!1;Q(a,f)}}function F(a,b){if(!b.every(da))throw Error("Ensure that each item passed to m.prop.combine/m.prop.merge is a stream");return ea(C(),b,function(){return a.apply(this,b.concat([b.filter(S)]))})}function ea(a,
b,f){var c=a._state;c.derive=f;c.parents=b.filter(fa);T(a,c.parents);R(a,!0);return a}function T(a,b){for(var f=0;f<b.length;f++)b[f]._state.deps[a._state.id]=a,T(a,b[f]._state.parents)}function P(a){for(var b=0;b<a._state.parents.length;b++)delete a._state.parents[b]._state.deps[a._state.id];for(var f in a._state.deps){var b=a._state.deps[f],c=b._state.parents.indexOf(a);-1<c&&b._state.parents.splice(c,1)}a._state.state=2;a._state.deps={}}function Z(a){return F(function(b){return a(b())},[this])}
function aa(a){return F(function(a,f){return a()(f())},[a,this])}function O(){return this._state.value}function ba(){return null!=this._state.value&&"function"===typeof this._state.value.toJSON?this._state.value.toJSON():this._state.value}function da(a){return a._state}function ca(a){return 1===a._state.state}function S(a){return a._state.changed}function fa(a){return 2!==a._state.state}l.normalize=function(a){return a instanceof Array?l("[",void 0,void 0,l.normalizeChildren(a),void 0,void 0):null!=
a&&"object"!==typeof a?l("#",void 0,void 0,a,void 0,void 0):a};l.normalizeChildren=function(a){for(var b=0;b<a.length;b++)a[b]=l.normalize(a[b]);return a};var W=/(?:(^|#|\.)([^#\.\[\]]+))|(\[(.+?)(?:\s*=\s*("|'|)((?:\\["'\]]|.)*?)\5)?\])/g,J={};t.trust=function(a){null==a&&(a="");return l("<",void 0,void 0,a,void 0,void 0)};t.fragment=function(a,b){return l("[",a.key,a,l.normalizeChildren(b),void 0,void 0)};var x=function(a){function b(a,b){return function w(k){var m;try{if(!b||null==k||"object"!==
typeof k&&"function"!==typeof k||"function"!==typeof(m=k.then))l(function(){b||0!==a.length||console.error("Possible unhandled promise rejection:",k);for(var c=0;c<a.length;c++)a[c](k);h.length=0;g.length=0;q.state=b;q.retry=function(){w(k)}});else{if(k===c)throw new TypeError("Promise can't be resolved w/ itself");f(m.bind(k))}}catch(G){n(G)}}}function f(a){function b(a){return function(b){0<d++||a(b)}}var d=0,c=b(n);try{a(b(u),c)}catch(k){c(k)}}if(!(this instanceof x))throw Error("Promise must be called with `new`");
if("function"!==typeof a)throw new TypeError("executor must be a function");var c=this,h=[],g=[],u=b(h,!0),n=b(g,!1),q=c._instance={resolvers:h,rejectors:g},l="function"===typeof setImmediate?setImmediate:setTimeout;f(a)};x.prototype.then=function(a,b){function f(a,b,f,m){b.push(function(b){if("function"!==typeof a)f(b);else try{h(a(b))}catch(d){g&&g(d)}});"function"===typeof c.retry&&m===c.state&&c.retry()}var c=this._instance,h,g,u=new x(function(a,b){h=a;g=b});f(a,c.resolvers,h,!0);f(b,c.rejectors,
g,!1);return u};x.prototype["catch"]=function(a){return this.then(null,a)};x.resolve=function(a){return a instanceof x?a:new x(function(b){b(a)})};x.reject=function(a){return new x(function(b,f){f(a)})};x.all=function(a){return new x(function(b,f){var c=a.length,h=0,g=[];if(0===a.length)b([]);else for(var u=0;u<a.length;u++)(function(u){function q(a){h++;g[u]=a;h===c&&b(g)}null==a[u]||"object"!==typeof a[u]&&"function"!==typeof a[u]||"function"!==typeof a[u].then?q(a[u]):a[u].then(q,f)})(u)})};x.race=
function(a){return new x(function(b,f){for(var c=0;c<a.length;c++)a[c].then(b,f)})};"undefined"===typeof Promise&&("undefined"!==typeof window?window.Promise=x:"undefined"!==typeof global&&(global.Promise=x));var H=function(a){function b(a,c){if(c instanceof Array)for(var g=0;g<c.length;g++)b(a+"["+g+"]",c[g]);else if("[object Object]"===Object.prototype.toString.call(c))for(g in c)b(a+"["+g+"]",c[g]);else f.push(encodeURIComponent(a)+(null!=c&&""!==c?"="+encodeURIComponent(c):""))}if("[object Object]"!==
Object.prototype.toString.call(a))return"";var f=[],c;for(c in a)b(c,a[c]);return f.join("&")},K=function(a,b){function f(){0===--m&&"function"===typeof v&&v()}function c(a){var b=a.then;a.then=function(){m++;var d=b.apply(a,arguments);d.then(f,function(a){f();throw a;});return c(d)};return a}function h(a,b){if(null==b)return a;for(var c=a.match(/:[^\/]+/gi)||[],d=0;d<c.length;d++){var f=c[d].slice(1);null!=b[f]&&(a=a.replace(c[d],b[f]),delete b[f])}return a}function g(a,b){var c=H(b);if(""!==c){var d=
0>a.indexOf("?")?"?":"&";a+=d+c}return a}function u(a){try{return""!==a?JSON.parse(a):null}catch(w){throw Error(a);}}function n(a){return a.responseText}function q(a,b){if("function"===typeof a)if(b instanceof Array)for(var c=0;c<b.length;c++)b[c]=new a(b[c]);else return new a(b);return b}var l=0,m=0,v;return{request:function(d,f){return c(new b(function(b,c){if("string"===typeof d){var m=d;d=f||{};null==d.url&&(d.url=m)}null==d.method&&(d.method="GET");d.method=d.method.toUpperCase();m="boolean"===
typeof d.useBody?d.useBody:"GET"!==d.method&&"TRACE"!==d.method;"function"!==typeof d.serialize&&(d.serialize="undefined"!==typeof FormData&&d.data instanceof FormData?function(a){return a}:JSON.stringify);"function"!==typeof d.deserialize&&(d.deserialize=u);"function"!==typeof d.extract&&(d.extract=n);d.url=h(d.url,d.data);m?d.data=d.serialize(d.data):d.url=g(d.url,d.data);var k=new a.XMLHttpRequest;k.open(d.method,d.url,"boolean"===typeof d.async?d.async:!0,"string"===typeof d.user?d.user:void 0,
"string"===typeof d.password?d.password:void 0);d.serialize===JSON.stringify&&m&&k.setRequestHeader("Content-Type","application/json; charset=utf-8");d.deserialize===u&&k.setRequestHeader("Accept","application/json, text/*");d.withCredentials&&(k.withCredentials=d.withCredentials);"function"===typeof d.config&&(k=d.config(k,d)||k);k.onreadystatechange=function(){if(4===k.readyState)try{var a=d.extract!==n?d.extract(k,d):d.deserialize(d.extract(k,d));if(200<=k.status&&300>k.status||304===k.status)b(q(d.type,
a));else{var f=Error(k.responseText),g;for(g in a)f[g]=a[g];c(f)}}catch(I){c(I)}};m&&null!=d.data?k.send(d.data):k.send()}))},jsonp:function(f){return c(new b(function(b,c){var d=f.callbackName||"_mithril_"+Math.round(1E16*Math.random())+"_"+l++,k=a.document.createElement("script");a[d]=function(c){k.parentNode.removeChild(k);b(q(f.type,c));delete a[d]};k.onerror=function(){k.parentNode.removeChild(k);c(Error("JSONP request failed"));delete a[d]};null==f.data&&(f.data={});f.url=h(f.url,f.data);f.data[f.callbackKey||
"callback"]=d;k.src=g(f.url,f.data);a.document.documentElement.appendChild(k)}))},setCompletionCallback:function(a){v=a}}}(window,"undefined"!==typeof Promise?Promise:x),L=function(){var a=[];return{subscribe:a.push.bind(a),unsubscribe:function(b){b=a.indexOf(b);-1<b&&a.splice(b,1)},publish:function(){for(var b=0;b<a.length;b++)a[b].apply(this,arguments)}}}();K.setCompletionCallback(L.publish);var V=function(a){function b(a,e,b,c,d,g,k){for(;b<c;b++){var p=e[b];null!=p&&q(a,f(p,d,k),g)}}function f(a,
e,r){var p=a.tag;null!=a.attrs&&x(a.attrs,a,e);if("string"===typeof p)switch(p){case "#":return a.dom=A.createTextNode(a.children);case "<":return c(a);case "[":var d=A.createDocumentFragment();null!=a.children&&(p=a.children,b(d,p,0,p.length,e,null,r));a.dom=d.firstChild;a.domSize=d.childNodes.length;return d;default:var g=a.tag;switch(a.tag){case "svg":r="http://www.w3.org/2000/svg";break;case "math":r="http://www.w3.org/1998/Math/MathML"}var m=(p=a.attrs)&&p.is,g=r?m?A.createElementNS(r,g,{is:m}):
A.createElementNS(r,g):m?A.createElement(g,{is:m}):A.createElement(g);a.dom=g;if(null!=p)for(d in m=r,p)k(a,d,null,p[d],m);null!=a.attrs&&null!=a.attrs.contenteditable?t(a):(null!=a.text&&(""!==a.text?g.textContent=a.text:a.children=[l("#",void 0,void 0,a.text,void 0,void 0)]),null!=a.children&&(d=a.children,b(g,d,0,d.length,e,null,r),e=a.attrs,"select"===a.tag&&null!=e&&("value"in e&&k(a,"value",null,e.value,void 0),"selectedIndex"in e&&k(a,"selectedIndex",null,e.selectedIndex,void 0))));return g}else{a.state||
(a.state={});ga(a.state,a.tag);d=a.tag.view;if(null!=d.reentrantLock)a=I;else if(d.reentrantLock=!0,x(a.tag,a,e),a.instance=l.normalize(d.call(a.state,a)),d.reentrantLock=null,null!=a.instance){if(a.instance===a)throw Error("A view cannot return the vnode it received as arguments");e=f(a.instance,e,r);a.dom=a.instance.dom;a.domSize=null!=a.dom?a.instance.domSize:0;a=e}else a.domSize=0,a=I;return a}}function c(a){var e={caption:"table",thead:"table",tbody:"table",tfoot:"table",tr:"tbody",th:"tr",td:"tr",
colgroup:"table",col:"colgroup"}[(a.children.match(/^\s*?<(\w+)/im)||[])[1]]||"div",e=A.createElement(e);e.innerHTML=a.children;a.dom=e.firstChild;a.domSize=e.childNodes.length;a=A.createDocumentFragment();for(var b;b=e.firstChild;)a.appendChild(b);return a}function h(a,e,r,c,d,k){if(e!==r&&(null!=e||null!=r))if(null==e)b(a,r,0,r.length,c,d,void 0);else if(null==r)m(e,0,e.length,r);else{var p;a:{if(null!=e.pool&&Math.abs(e.pool.length-r.length)<=Math.abs(e.length-r.length)&&(p=r[0]&&r[0].children&&
r[0].children.length||0,Math.abs((e.pool[0]&&e.pool[0].children&&e.pool[0].children.length||0)-p)<=Math.abs((e[0]&&e[0].children&&e[0].children.length||0)-p))){p=!0;break a}p=!1}p&&(e=e.concat(e.pool));if(e.length===r.length&&null!=r[0]&&null==r[0].key)for(var h=0;h<e.length;h++)e[h]===r[h]||null==e[h]&&null==r[h]||(null==e[h]?q(a,f(r[h],c,k),n(e,h+1,d)):null==r[h]?m(e,h,h+1,r):g(a,e[h],r[h],c,n(e,h+1,d),p,k),p&&e[h].tag===r[h].tag&&q(a,u(e[h]),n(e,h+1,d)));else{for(var B=h=0,v=e.length-1,z=r.length-
1,w;v>=h&&z>=B;){var y=e[h],l=r[B];if(y!==l||p)if(null!=y&&null!=l&&y.key===l.key)h++,B++,g(a,y,l,c,n(e,h,d),p,k),p&&y.tag===l.tag&&q(a,u(y),d);else if(y=e[v],y!==l||p)if(null!=y&&null!=l&&y.key===l.key)g(a,y,l,c,n(e,v+1,d),p,k),(p||B<z)&&q(a,u(y),n(e,h,d)),v--,B++;else break;else v--,B++;else h++,B++}for(;v>=h&&z>=B;){y=e[v];l=r[z];if(y!==l||p)if(null!=y&&null!=l&&y.key===l.key)g(a,y,l,c,n(e,v+1,d),p,k),p&&y.tag===l.tag&&q(a,u(y),d),null!=y.dom&&(d=y.dom),v--;else{if(!w){w=e;var y=v,E={},t;for(t=
0;t<y;t++){var x=w[t];null!=x&&(x=x.key,null!=x&&(E[x]=t))}w=E}null!=l&&(y=w[l.key],null!=y?(E=e[y],g(a,E,l,c,n(e,v+1,d),p,k),q(a,u(E),d),e[y].skip=!0,null!=E.dom&&(d=E.dom)):(l=f(l,c,void 0),q(a,l,d),d=l))}else v--;z--;if(z<B)break}b(a,r,B,z+1,c,d,k);m(e,h,v+1,r)}}}function g(a,e,b,m,v,z,w){var p=e.tag;if(p===b.tag){b.state=e.state;b.events=e.events;var r;var B;null!=b.attrs&&"function"===typeof b.attrs.onbeforeupdate&&(r=b.attrs.onbeforeupdate.call(b.state,b,e));"string"!==typeof b.tag&&"function"===
typeof b.tag.onbeforeupdate&&(B=b.tag.onbeforeupdate.call(b.state,b,e));void 0===r&&void 0===B||r||B?r=!1:(b.dom=e.dom,b.domSize=e.domSize,b.instance=e.instance,r=!0);if(!r)if(null!=b.attrs&&C(b.attrs,b,m,z),"string"===typeof p)switch(p){case "#":e.children.toString()!==b.children.toString()&&(e.dom.nodeValue=b.children);b.dom=e.dom;break;case "<":e.children!==b.children?(u(e),q(a,c(b),v)):(b.dom=e.dom,b.domSize=e.domSize);break;case "[":h(a,e.children,b.children,m,v,w);e=0;m=b.children;b.dom=null;
if(null!=m){for(var n=0;n<m.length;n++)a=m[n],null!=a&&null!=a.dom&&(null==b.dom&&(b.dom=a.dom),e+=a.domSize||1);1!==e&&(b.domSize=e)}break;default:a=w;v=b.dom=e.dom;switch(b.tag){case "svg":a="http://www.w3.org/2000/svg";break;case "math":a="http://www.w3.org/1998/Math/MathML"}"textarea"===b.tag&&(null==b.attrs&&(b.attrs={}),null!=b.text&&(b.attrs.value=b.text,b.text=void 0));z=e.attrs;w=b.attrs;p=a;if(null!=w)for(n in w)k(b,n,z&&z[n],w[n],p);if(null!=z)for(n in z)null!=w&&n in w||("className"===
n&&(n="class"),"o"!==n[0]||"n"!==n[1]||U(n)?"key"!==n&&b.dom.removeAttribute(n):G(b,n,void 0));null!=b.attrs&&null!=b.attrs.contenteditable?t(b):null!=e.text&&null!=b.text&&""!==b.text?e.text.toString()!==b.text.toString()&&(e.dom.firstChild.nodeValue=b.text):(null!=e.text&&(e.children=[l("#",void 0,void 0,e.text,void 0,e.dom.firstChild)]),null!=b.text&&(b.children=[l("#",void 0,void 0,b.text,void 0,void 0)]),h(v,e.children,b.children,m,null,a))}else b.instance=l.normalize(b.tag.view.call(b.state,
b)),C(b.tag,b,m,z),null!=b.instance?(null==e.instance?q(a,f(b.instance,m,w),v):g(a,e.instance,b.instance,m,v,z,w),b.dom=b.instance.dom,b.domSize=b.instance.domSize):null!=e.instance?(d(e.instance,null),b.dom=void 0,b.domSize=0):(b.dom=e.dom,b.domSize=e.domSize)}else d(e,null),q(a,f(b,m,w),v)}function u(a){var b=a.domSize;if(null!=b||null==a.dom){var p=A.createDocumentFragment();if(0<b){for(a=a.dom;--b;)p.appendChild(a.nextSibling);p.insertBefore(a,p.firstChild)}return p}return a.dom}function n(a,
b,c){for(;b<a.length;b++)if(null!=a[b]&&null!=a[b].dom)return a[b].dom;return c}function q(a,b,c){c&&c.parentNode?a.insertBefore(b,c):a.appendChild(b)}function t(a){var b=a.children;if(null!=b&&1===b.length&&"<"===b[0].tag)b=b[0].children,a.dom.innerHTML!==b&&(a.dom.innerHTML=b);else if(null!=b||null!=a.text)throw Error("Child node of a contenteditable must be trusted");}function m(a,b,c,f){for(;b<c;b++){var e=a[b];null!=e&&(e.skip?e.skip=!1:d(e,f))}}function v(a){var b=!1;return function(){b||(b=
!0,a())}}function d(a,b){function e(){if(++d===c&&(w(a),a.dom)){var e=a.domSize||1;if(1<e)for(var p=a.dom;--e;){var f=p.nextSibling,g=f.parentNode;null!=g&&g.removeChild(f)}e=a.dom;p=e.parentNode;null!=p&&p.removeChild(e);if(e=null!=b&&null==a.domSize)e=a.attrs,e=!(null!=e&&(e.oncreate||e.onupdate||e.onbeforeremove||e.onremove));e&&"string"===typeof a.tag&&(b.pool?b.pool.push(a):b.pool=[a])}}var c=1,d=0;a.attrs&&a.attrs.onbeforeremove&&(c++,a.attrs.onbeforeremove.call(a.state,a,v(e)));"string"!==
typeof a.tag&&a.tag.onbeforeremove&&(c++,a.tag.onbeforeremove.call(a.state,a,v(e)));e()}function w(a){a.attrs&&a.attrs.onremove&&a.attrs.onremove.call(a.state,a);"string"!==typeof a.tag&&a.tag.onremove&&a.tag.onremove.call(a.state,a);if(null!=a.instance)w(a.instance);else if(a=a.children,a instanceof Array)for(var b=0;b<a.length;b++){var c=a[b];null!=c&&w(c)}}function k(a,b,c,d,f){var e=a.dom;if("key"!==b&&(c!==d||"value"===b||"checked"===b||"selectedIndex"===b||"selected"===b&&a.dom===A.activeElement||
"object"===typeof d)&&"undefined"!==typeof d&&!U(b)){var g=b.indexOf(":");if(-1<g&&"xlink"===b.substr(0,g))e.setAttributeNS("http://www.w3.org/1999/xlink",b.slice(g+1),d);else if("o"===b[0]&&"n"===b[1]&&"function"===typeof d)G(a,b,d);else if("style"===b)if(a=c,a===d&&(e.style.cssText="",a=null),null==d)e.style.cssText="";else if("string"===typeof d)e.style.cssText=d;else{"string"===typeof a&&(e.style.cssText="");for(var k in d)e.style[k]=d[k];if(null!=a&&"string"!==typeof a)for(k in a)k in d||(e.style[k]=
"")}else b in e&&"href"!==b&&"list"!==b&&"form"!==b&&"width"!==b&&"height"!==b&&void 0===f?"input"===a.tag&&"value"===b&&a.dom.value===d&&a.dom===A.activeElement||"select"===a.tag&&"value"===b&&a.dom.value===d&&a.dom===A.activeElement||"option"===a.tag&&"value"===b&&a.dom.value===d||(e[b]=d):"boolean"===typeof d?d?e.setAttribute(b,""):e.removeAttribute(b):e.setAttribute("className"===b?"class":b,d)}}function U(a){return"oninit"===a||"oncreate"===a||"onupdate"===a||"onremove"===a||"onbeforeremove"===
a||"onbeforeupdate"===a}function G(a,b,c){var e=a.dom,d=function(a){var b=c.call(e,a);"function"===typeof D&&D.call(e,a);return b};if(b in e)e[b]="function"===typeof c?d:null;else{var f=b.slice(2);void 0===a.events&&(a.events={});null!=a.events[b]&&e.removeEventListener(f,a.events[b],!1);"function"===typeof c&&(a.events[b]=d,e.addEventListener(f,a.events[b],!1))}}function x(a,b,c){"function"===typeof a.oninit&&a.oninit.call(b.state,b);"function"===typeof a.oncreate&&c.push(a.oncreate.bind(b.state,
b))}function C(a,b,c,d){d?x(a,b,c):"function"===typeof a.onupdate&&c.push(a.onupdate.bind(b.state,b))}function ga(a,b){Object.keys(b).forEach(function(c){a[c]=b[c]})}var A=a.document,I=A.createDocumentFragment(),D;return{render:function(a,b){if(!a)throw Error("Ensure the DOM element being passed to m.route/m.mount/m.render is not undefined.");var c=[],d=A.activeElement;null==a.vnodes&&(a.textContent="");b instanceof Array||(b=[b]);h(a,a.vnodes,l.normalizeChildren(b),c,null,void 0);a.vnodes=b;for(var e=
0;e<c.length;e++)c[e]();A.activeElement!==d&&d.focus()},setEventCallback:function(a){return D=a}}}(window),ha=function(a){var b=0,f=null,c="function"===typeof requestAnimationFrame?requestAnimationFrame:setTimeout;return function(h){var g=Date.now();!0===h||0===b||16<=g-b?(b=g,a()):null===f&&(f=c(function(){f=null;a();b=Date.now()},16-(g-b)))}},ia=function(a,b,f,c){c=ha(c);null!=b&&b.setEventCallback(function(a){!1!==a.redraw&&f.publish()});null!=f&&(a.redraw&&f.unsubscribe(a.redraw),f.subscribe(c));
return a.redraw=c};t.mount=function(a,b){return function(f,c){if(null===c)a.render(f,[]),b.unsubscribe(f.redraw),delete f.redraw;else{if(null==c.view)throw Error("m.mount(element, component) expects a component, not a vnode");ia(f,a,b,function(){a.render(f,l(c,void 0,void 0,void 0,void 0,void 0))})()}}}(V,L);var M=function(a){if(""===a||null==a)return{};"?"===a.charAt(0)&&(a=a.slice(1));a=a.split("&");for(var b={},f={},c=0;c<a.length;c++){var h=a[c].split("="),g=decodeURIComponent(h[0]),h=2===h.length?
decodeURIComponent(h[1]):"";"true"===h?h=!0:"false"===h&&(h=!1);var l=g.split(/\]\[?|\[/),n=b;-1<g.indexOf("[")&&l.pop();for(var q=0;q<l.length;q++){var g=l[q],t=l[q+1],t=""==t||!isNaN(parseInt(t,10)),m=q===l.length-1;""===g&&(g=l.slice(0,q).join(),null==f[g]&&(f[g]=0),g=f[g]++);null==n[g]&&(n[g]=m?h:t?[]:{});n=n[g]}}return b},ja=function(a){function b(b){var c=a.location[b].replace(/(?:%[a-f89][a-f0-9])+/gim,decodeURIComponent);"pathname"===b&&"/"!==c[0]&&(c="/"+c);return c}function f(a){return function(){null==
t&&(t=n(function(){t=null;a()}))}}function c(a,b,c){var d=a.indexOf("?"),f=a.indexOf("#"),g=-1<d?d:-1<f?f:a.length;if(-1<d){var d=M(a.slice(d+1,-1<f?f:a.length)),h;for(h in d)b[h]=d[h]}if(-1<f)for(h in b=M(a.slice(f+1)),b)c[h]=b[h];return a.slice(0,g)}function h(){switch(q.charAt(0)){case "#":return b("hash").slice(q.length);case "?":return b("search").slice(q.length)+b("hash");default:return b("pathname").slice(q.length)+b("search")+b("hash")}}function g(b,f,d){var g={},h={};b=c(b,g,h);if(null!=
f){for(var m in f)g[m]=f[m];b=b.replace(/:([^\/]+)/g,function(a,b){delete g[b];return f[b]})}(m=H(g))&&(b+="?"+m);(h=H(h))&&(b+="#"+h);l?(d&&d.replace?a.history.replaceState(null,null,q+b):a.history.pushState(null,null,q+b),a.onpopstate()):a.location.href=q+b}var l="function"===typeof a.history.pushState,n="function"===typeof setImmediate?setImmediate:setTimeout,q="#!",t;return{setPrefix:function(a){q=a},getPath:h,setPath:g,defineRoutes:function(b,g,d){function m(){var a=h(),f={},l=c(a,f,f),m;for(m in b){var n=
new RegExp("^"+m.replace(/:[^\/]+?\.{3}/g,"(.*?)").replace(/:[^\/]+/g,"([^\\/]+)")+"/?$");if(n.test(l)){l.replace(n,function(){for(var c=m.match(/:[^\/]+/g)||[],d=[].slice.call(arguments,1,-2),h=0;h<c.length;h++)f[c[h].replace(/:|\./g,"")]=decodeURIComponent(d[h]);g(b[m],f,a,m)});return}}d(a,f)}l?a.onpopstate=f(m):"#"===q.charAt(0)&&(a.onhashchange=m);m();return m},link:function(a){a.dom.setAttribute("href",q+a.attrs.href);a.dom.onclick=function(a){a.ctrlKey||a.metaKey||a.shiftKey||2===a.which||(a.preventDefault(),
a.redraw=!1,a=this.getAttribute("href"),0===a.indexOf(q)&&(a=a.slice(q.length)),g(a,void 0,void 0))}}}};t.route=function(a,b){function f(a){return a}var c=ja(a),h,g,t,n,q,x={view:function(){return[t(l(g,null,n,void 0,void 0,void 0))]}},m=function(a,d,l){g="div";t=f;n=null;b(a,x);c.defineRoutes(l,function(b,c,d){var k="function"!==typeof b.view,l=f,m=h=function(f){m===h&&(h=null,g=null!=f?f:k?"div":b,t=l,n=c,q=d,a.redraw(!0))},u=function(){m()};k&&("function"===typeof b.render&&(l=b.render.bind(b)),
"function"===typeof b.onmatch&&(u=b.onmatch));u.call(b,m,c,d)},function(){c.setPath(d,null,{replace:!0})})};m.link=c.link;m.prefix=c.setPrefix;m.set=c.setPath;m.get=function(){return q};return m}(window,t.mount);t.withAttr=function(a,b,f){return function(c){return b.call(f||this,a in c.currentTarget?c.currentTarget[a]:c.currentTarget.getAttribute(a))}};t.render=V.render;t.redraw=L.publish;t.request=K.request;t.jsonp=K.jsonp;t.parseQueryString=M;t.buildQueryString=H;t.version="1.0.0-rc.5";var Y=0,
D={};C["fantasy-land/of"]=C;C.merge=function(a){return F(function(){return a.map(function(a){return a()})},a)};C.combine=F;C.HALT=D;t.stream=C;var ka=t.stream.combine;t.stream.scan=function(a,b,f){f=ka(function(c){return b=a(b,c._state.value)},[f]);0===f._state.state&&f(b);return f};var la=_36.combine;t.stream.scanMerge=function(a,b){var f=a.map(function(a){a=a[0];0===a._state.state&&a(void 0);return a});return la(function(){var c=arguments[arguments.length-1];f.forEach(function(f,g){-1<c.indexOf(f)&&
(b=a[g][1](b,f._state.value))});return b},f)};"undefined"!==typeof module?module.exports=t:window.m=t};