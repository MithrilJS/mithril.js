<!doctype html>
<html lang=en>
<head>
<meta charset=UTF-8>
<title>Mithril.js</title>
<link href="https://fonts.googleapis.com/css?family=Open+Sans" rel=stylesheet>
<link href=https://cdnjs.cloudflare.com/ajax/libs/prism/1.17.1/themes/prism.min.css rel=stylesheet>
<link href=style.css rel=stylesheet>
<link rel=icon type=image/png sizes=32x32 href=favicon.png>
<meta name=viewport content="width=device-width,initial-scale=1">
<meta name=description content="Documentation on m.redraw(), which schedules an update of all components mounted via m.mount()">
</head>
<body onload="window.requestAnimationFrame(function(){document.getElementById('archive-docs').selectedIndex = 0})" /* handle back navigation */>
<header>
<section>
<a class=hamburger href=javascript:;>â‰¡</a>
<h1><img src=logo.svg> Mithril <select id=archive-docs onchange="location.href='archive/' + this.value + '/index.html'"><option>v2.2.0<option>v2.0.4<option>v2.0.3<option>v2.0.2<option>v2.0.1<option>v2.0.0-rc.9<option>v2.0.0-rc.8<option>v2.0.0-rc.7<option>v2.0.0-rc.6<option>v2.0.0-rc.5<option>v2.0.0-rc.4<option>v2.0.0-rc.3<option>v2.0.0-rc.1<option>v2.0.0-rc.0<option>v1.1.7<option>v1.1.6<option>v1.1.5<option>v1.1.4<option>v1.1.3<option>v1.1.2<option>v1.1.1<option>v1.1.0-rc.1<option>v1.1.0<option>v1.0.1<option>v1.0.0<option>v0.2.5<option>v0.2.4<option>v0.2.3<option>v0.2.2-rc.1<option>v0.2.1<option>v0.2.0<option>v0.1.9<option>v0.1.8<option>v0.1.7<option>v0.1.6<option>v0.1.5<option>v0.1.4<option>v0.1.34<option>v0.1.33<option>v0.1.32<option>v0.1.31<option>v0.1.30<option>v0.1.3<option>v0.1.29<option>v0.1.28<option>v0.1.27<option>v0.1.26<option>v0.1.25<option>v0.1.24<option>v0.1.23<option>v0.1.22<option>v0.1.21<option>v0.1.20<option>v0.1.2<option>v0.1.19<option>v0.1.18<option>v0.1.17<option>v0.1.16<option>v0.1.15<option>v0.1.14<option>v0.1.13<option>v0.1.12<option>v0.1.11<option>v0.1.10<option>v0.1.1<option>v0.1</select></h1>
<nav>
<a href=index.html>Guide</a>
<a href=api.html>API</a>
<a href=https://gitter.im/MithrilJS/mithril.js>Chat</a>
<a href=https://github.com/MithrilJS/mithril.js>GitHub</a>
</nav>
</section>
</header>
<main>
<section>
<h1 id=redraw><a href=#redraw>redraw()</a></h1>
<ul>
<li>Core<ul>
<li><a href=hyperscript.html>m</a></li>
<li><a href=render.html>m.render</a></li>
<li><a href=mount.html>m.mount</a></li>
<li><a href=route.html>m.route</a></li>
<li><a href=request.html>m.request</a></li>
<li><a href=jsonp.html>m.jsonp</a></li>
<li><a href=parseQueryString.html>m.parseQueryString</a></li>
<li><a href=buildQueryString.html>m.buildQueryString</a></li>
<li><a href=buildPathname.html>m.buildPathname</a></li>
<li><a href=parsePathname.html>m.parsePathname</a></li>
<li><a href=trust.html>m.trust</a></li>
<li><a href=fragment.html>m.fragment</a></li>
<li><strong><a href=redraw.html>m.redraw</a></strong><ul>
<li><a href=#description>Description</a></li>
<li><a href=#signature>Signature</a><ul>
<li><a href=#static-members>Static members</a>
-<a href=#mredrawsync>m.redraw.sync()</a></li>
</ul>
</li>
<li><a href=#how-it-works>How it works</a></li>
</ul>
</li>
<li><a href=promise.html>Promise</a></li>
</ul>
</li>
<li>Optional<ul>
<li><a href=stream.html>Stream</a></li>
</ul>
</li>
<li>Tooling<ul>
<li><a href=https://github.com/MithrilJS/mithril.js/blob/master/ospec>Ospec</a></li>
</ul>
</li>
</ul>
<hr>
<h3 id=description><a href=#description>Description</a></h3>
<p>Updates the DOM after a change in the application data layer.</p>
<p>You DON&#39;T need to call it if data is modified within the execution context of an event handler defined in a Mithril.js view, or after request completion when using <code>m.request</code>/<code>m.jsonp</code>. The <a href=autoredraw.html>autoredraw</a> system, which is built on top of <code>m.redraw()</code> will take care of it.</p>
<p>You DO need to call it in <code>setTimeout</code>/<code>setInterval</code>/<code>requestAnimationFrame</code> callbacks, or callbacks from 3rd party libraries.</p>
<hr>
<h3 id=signature><a href=#signature>Signature</a></h3>
<p><code>m.redraw()</code></p>
<table>
<thead>
<tr>
<th>Argument</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead>
<tr>
<td><strong>returns</strong></td>
<td></td>
<td></td>
<td>Returns nothing</td>
</tr>
</table>
<h4 id=static-members><a href=#static-members>Static members</a></h4>
<h5 id=mredrawsync><a href=#mredrawsync>m.redraw.sync</a></h5>
<p><code>m.redraw.sync()</code></p>
<table>
<thead>
<tr>
<th>Argument</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead>
<tr>
<td><strong>returns</strong></td>
<td></td>
<td></td>
<td>Returns nothing</td>
</tr>
</table>
<hr>
<h3 id=how-it-works><a href=#how-it-works>How it works</a></h3>
<p>When callbacks outside of Mithril.js run, you need to notify Mithril.js&#39; rendering engine that a redraw is needed. External callbacks could be <code>setTimeout</code>/<code>setInterval</code>/<code>requestAnimationFrame</code> callbacks, web socket library callbacks, event handlers in jQuery plugins, third party XHR request callbacks, etc.</p>
<p>To trigger a redraw, call <code>m.redraw()</code>. Note that <code>m.redraw</code> only works if you used <code>m.mount</code> or <code>m.route</code>. If you rendered via <code>m.render</code>, you should use <code>m.render</code> to redraw.</p>
<p><code>m.redraw()</code> always triggers an asynchronous redraws, whereas <code>m.redraw.sync()</code> triggers a synchronous one. <code>m.redraw()</code> is tied to <code>window.requestAnimationFrame()</code>. It will thus typically fire at most 60 times per second. It may fire faster if your monitor has a higher refresh rate.</p>
<p><code>m.redraw.sync()</code> is mostly intended to make videos play work in iOS. That only works in response to user-triggered events. It comes with several caveat:</p>
<ul>
<li>You should not call <code>m.redraw.sync()</code> from a <a href=lifecycle-methods.html>lifecycle method</a> or the <code>view()</code> method of a component. Doing so will result in undefined behavior (it throws an error when possible).</li>
<li><code>m.redraw.sync()</code> called from an event handler can cause the DOM to be modified while an event is bubbling. Depending on the structure of the old and new DOM trees, the event can finish the bubbling phase in the new tree and trigger unwanted handlers.</li>
<li>It is not throttled. One call to <code>m.redraw.sync()</code> causes immediately one <code>m.render()</code> call per root registered with <a href=mount.html><code>m.mount()</code></a> or <a href=route.html><code>m.route()</code></a>.</li>
</ul>
<p><code>m.redraw()</code> doesn&#39;t have any of those issues, you can call it from wherever you like.</p>
<hr>
<small>License: MIT. &copy; Leo Horie.</small>
</section>
</main>
<script src=https://cdnjs.cloudflare.com/ajax/libs/prism/1.17.1/prism.min.js></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/prism/1.17.1/components/prism-jsx.min.js></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/prism/1.17.1/components/prism-diff.min.js></script>
<script src=https://unpkg.com/mithril@2.2.0/mithril.js async></script>
<script src=https://flems.io/flems.html id=flems defer></script>
<script>
document.querySelector(".hamburger").onclick = function() {
			document.body.className = document.body.className === "navigating" ? "" : "navigating"
			document.querySelector("h1 + ul").onclick = function() {
				document.body.className = ''
			}
		}
		document.getElementById("flems").onload = function() {
			var systemFonts = [
				"body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol'; }",
				"body { height: 100%; overflow:hidden; display:flex; justify-content: center; align-items:center; }"
			].join("")
			;[].forEach.call(document.querySelectorAll("pre code.language-js"), function(el) {
				el = el.parentNode

				var div = document.createElement("div")
				window.Flems(div, {
					middle        : 60,
					editable      : true,
					toolbar       : false,
					shareButton   : true,
					console       : false,
					autoHeight    : true,
					files: [{
						name: ".js",
						content: el.textContent
					}, {
						name: ".css",
						content: systemFonts
					}],
					links: [{
						name: "mithril",
						type: "script",
						url: "https://unpkg.com/mithril@2.2.0/mithril.js"
					}]
				}, "https://flems.io/flems.html")

				el.parentNode.insertBefore(div, el)
				el.parentNode.removeChild(el)
			})
		}
</script>
